{% extends 'base.html' %}


{% block head %}
<!-- Import chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Custom CSS -->
<link href="{{url_for('static', filename='dashboard.css')}}" rel="stylesheet">
{% endblock %}
{% block content %}

<div class="container">
  <main>
    <canvas class="my-4 chartjs-render-monitor" id="myChart" width="935" height="394"
      style="display: block; width: 935px; height: 394px;"></canvas>
  </main>
</div>

<script>
  const ctx = document.getElementById('myChart');

  const generateGraph = (ctx, context) => {
    let graph_data = JSON.parse(context)
    console.log(graph_data)
    new Chart(ctx, {
      type: graph_data['graph_type'] || 'bar',
      data: {
        labels: graph_data.labels,
        datasets: [{
          label: graph_data.graph_title,
          data: graph_data.data,
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  }

  generateGraph(ctx, '{{ data|tojson }}');

</script>

{% endblock %}